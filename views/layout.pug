doctype html
html(lang='en')
  head
    meta(charset='UTF-8')
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    title= title || 'TechStore'
    
    //- Tailwind CSS CDN
    script(src='https://cdn.tailwindcss.com')
    
    //- jQuery CDN
    script(src='https://code.jquery.com/jquery-3.7.1.min.js')

    // targetGlobalSettings for Adobe Target
    script.
      window.targetGlobalSettings = {
        clientCode: '!{targetClientCode}',
        decisioningMethod: '!{targetDecisioningMethod}',
        organizationId: '!{organizationId}',
        propertyToken: '!{propertyToken}',
        serverDomain: '!{serverDomain}'
      };
      console.log('Target Global Settings:', window.targetGlobalSettings);

    // prehiding for Adobe Target
    script.
      (function (win, doc, style, timeout) {
        var STYLE_ID = 'at-body-style';

        function getParent() {
          return doc.getElementsByTagName('head')[0];
        }
        function addStyle(parent, id, def) {
          if (!parent) return;
          var el = doc.createElement('style');
          el.id = id;
          el.innerHTML = def;
          parent.appendChild(el);
        }
        function removeStyle(parent, id) {
          if (!parent) return;
          var el = doc.getElementById(id);
          if (!el) return;
          parent.removeChild(el);
        }

        addStyle(getParent(), STYLE_ID, style);
        setTimeout(function () {
          removeStyle(getParent(), STYLE_ID);
        }, timeout);

      })(window, document, 'body {opacity: 0 !important}', 3000);

    
    //- Adobe Target at.js (if configured)
    if atjsPath
      script(src=atjsPath)
    
  body.bg-gray-50.min-h-screen.flex.flex-col
    //- Header
    include partials/header
    
    //- Main Content
    main.flex-grow
      block content
    
    //- Footer
    include partials/footer

    block append-script