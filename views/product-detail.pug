extends layout

block content
  div(class='container mx-auto px-4 py-8')
    div(class='grid grid-cols-1 lg:grid-cols-2 gap-8')
      //- Product Images
      div
        div(class='bg-gray-200 rounded-lg flex items-center justify-center h-96')
          span(class='text-8xl') ðŸ“¦
        
        if product.salePrice
          div(class='mt-4 bg-red-100 border-l-4 border-red-500 p-4')
            p(class='font-bold text-red-600') ðŸ”¥ SALE - Save $#{(product.price - product.salePrice).toFixed(2)}!
      
      //- Product Info
      div
        h1(class='text-4xl font-bold mb-4')= product.name
        
        //- Price
        div(class='flex items-baseline space-x-3 mb-6')
          if product.salePrice
            span(class='text-3xl font-bold text-red-600')= `$${product.salePrice.toFixed(2)}`
            span(class='text-2xl text-gray-500 line-through')= `$${product.price.toFixed(2)}`
          else
            span(class='text-3xl font-bold text-gray-800')= `$${product.price.toFixed(2)}`
        
        //- Description
        p(class='text-gray-700 mb-6 leading-relaxed')= product.description
        
        //- Category & Brand
        div(class='grid grid-cols-2 gap-4 mb-6 text-sm')
          div
            span(class='text-gray-600') Category: 
            span(class='font-medium')= product.category
          div
            span(class='text-gray-600') Brand: 
            span(class='font-medium')= product.brand
        
        //- Stock Status
        if product.inStock
          p(class='text-green-600 font-medium mb-6') âœ“ In Stock
        else
          p(class='text-red-600 font-medium mb-6') âœ— Out of Stock
        
        //- Add to Cart
        if product.inStock
          button(
            class='add-to-cart-btn w-full bg-blue-600 text-white px-8 py-4 rounded-lg hover:bg-blue-700 font-semibold text-lg'
            data-product-id=product.id
            type='button'
          ) Add to Cart
        else
          button(
            class='w-full bg-gray-400 text-white px-8 py-4 rounded-lg font-semibold text-lg cursor-not-allowed'
            disabled
          ) Out of Stock
    
    //- Adobe Target Recommendations Section
    if recommendedProducts && recommendedProducts.length > 0
      section(class='mt-16')
        h2(class='text-3xl font-bold mb-8') You May Also Like
        div(class='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6')
          each recProduct in recommendedProducts
            include partials/product-card

script.
  $(document).ready(function() {
    $('.add-to-cart-btn').on('click', function(e) {
      e.preventDefault();
      
      const productId = $(this).data('product-id');
      const button = $(this);
      
      $.ajax({
        url: '/cart/add',
        method: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({ productId: productId, quantity: 1 }),
        success: function(response) {
          button.text('Added to Cart! âœ“').removeClass('bg-blue-600 hover:bg-blue-700').addClass('bg-green-600');
          
          setTimeout(function() {
            window.location.href = '/cart';
          }, 1000);
        },
        error: function() {
          alert('Failed to add item to cart. Please try again.');
        }
      });
    });
  });
