extends layout

block content
  div(class='container mx-auto px-4 py-8')
    h1(class='text-3xl font-bold mb-8') Search Products
    
    //- Search Form
    form(action='/products/search' method='GET' class='mb-8')
      div(class='flex gap-4')
        input(
          type='text'
          name='q'
          value=query
          placeholder='Search for products...'
          class='flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500'
        )
        button(
          type='submit'
          class='bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 font-medium'
        ) Search
    
    //- Filters
    div(class='flex gap-4 mb-8 flex-wrap')
      a(
        href=`/products/search?q=${query || ''}`
        class=`px-4 py-2 rounded-lg ${!category ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}`
      ) All
      
      a(
        href=`/products/search?q=${query || ''}&category=laptops`
        class=`px-4 py-2 rounded-lg ${category === 'laptops' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}`
      ) Laptops
      
      a(
        href=`/products/search?q=${query || ''}&category=phones`
        class=`px-4 py-2 rounded-lg ${category === 'phones' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}`
      ) Phones
      
      a(
        href=`/products/search?q=${query || ''}&category=audio`
        class=`px-4 py-2 rounded-lg ${category === 'audio' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}`
      ) Audio
      
      a(
        href=`/products/search?q=${query || ''}&category=wearables`
        class=`px-4 py-2 rounded-lg ${category === 'wearables' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}`
      ) Wearables
    
    //- Results
    if products && products.length > 0
      p(class='text-gray-600 mb-6')= `Found ${products.length} product${products.length !== 1 ? 's' : ''}`
      
      div(class='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6')
        each product in products
          include partials/product-card
    else
      div(class='text-center py-12')
        p(class='text-xl text-gray-600 mb-4') No products found
        if query
          p(class='text-gray-500') Try searching with different keywords
        a(href='/products/search' class='text-blue-600 hover:underline') Browse all products
