extends layout

block content
  div(class='container mx-auto px-4 py-8')
    h1(class='text-3xl font-bold mb-8') Shopping Cart
    
    //- Adobe Target mbox: cart-abandonment-offer
    if targetOffers && targetOffers.cart
      div(class='bg-yellow-100 border-l-4 border-yellow-500 p-4 mb-6')
        p(class='font-medium')!= targetOffers.cart
    
    if !cart || cart.items.length === 0
      div(class='text-center py-12')
        h2(class='text-2xl font-semibold mb-2') Your cart is empty
        p(class='text-gray-600 mb-6') Add some products to get started
        a(href='/products/search' class='bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 inline-block')
          | Continue Shopping
    else
      div(class='grid grid-cols-1 lg:grid-cols-3 gap-8')
        //- Cart Items
        div(class='lg:col-span-2 space-y-4')
          each item in cart.items
            div(class='bg-white rounded-lg shadow-md p-6 flex items-center space-x-4')
              //- Product Image
              div(class='flex-shrink-0')
                div(class='w-24 h-24 bg-gray-200 rounded flex items-center justify-center')
                  span(class='text-3xl') ðŸ“¦
              
              //- Product Details
              div(class='flex-grow')
                h3(class='font-semibold text-lg')
                  a(href=`/products/${item.productId}` class='hover:text-blue-600')= item.name
                p(class='text-gray-600 mt-1')= `$${item.price.toFixed(2)} each`
                
                //- Quantity Controls
                div(class='flex items-center space-x-3 mt-3')
                  form(action=`/cart/update/${item.productId}`, method='POST' class='flex items-center space-x-2')
                    button(
                      type='submit',
                      name='action',
                      value='decrease',
                      class='bg-gray-200 text-gray-700 w-8 h-8 rounded hover:bg-gray-300'
                    ) -
                    span(class='px-3 font-medium')= item.quantity
                    button(
                      type='submit',
                      name='action',
                      value='increase',
                      class='bg-gray-200 text-gray-700 w-8 h-8 rounded hover:bg-gray-300'
                    ) +
              
              //- Item Total and Remove
              div(class='flex-shrink-0 text-right')
                p(class='font-semibold text-lg mb-3')= `$${(item.price * item.quantity).toFixed(2)}`
                form(action=`/cart/remove/${item.productId}`, method='POST')
                  button(
                    type='submit',
                    class='text-red-500 hover:text-red-700 text-sm'
                  ) Remove
        
        //- Order Summary
        div(class='lg:col-span-1')
          div(class='bg-white rounded-lg shadow-md p-6 sticky top-4')
            h2(class='text-xl font-semibold mb-4') Order Summary
            
            div(class='space-y-2 mb-4')
              div(class='flex justify-between')
                span(class='text-gray-600') Subtotal
                span(class='font-medium')= `$${cart.total.toFixed(2)}`
              div(class='flex justify-between')
                span(class='text-gray-600') Shipping
                span(class='font-medium') Free
              div(class='flex justify-between')
                span(class='text-gray-600') Tax
                span(class='font-medium')= `$${(cart.total * 0.1).toFixed(2)}`
              
              div(class='border-t pt-2 mt-2')
                div(class='flex justify-between text-lg font-bold')
                  span Total
                  span= `$${(cart.total * 1.1).toFixed(2)}`
            
            a(href='/checkout' class='block w-full bg-blue-600 text-white text-center py-3 rounded-lg hover:bg-blue-700 font-medium mb-3')
              | Proceed to Checkout
            
            a(href='/products/search' class='block w-full text-center text-blue-600 hover:underline')
              | Continue Shopping
